由于工作需要，还是会接触很多windows下的Oracle版本，所以这次对数据库的升级做一个大致的总结： windows下Oracle11.2.0.1升级至Oracle11.2.0.4。

但这里不采用绝大多数网上的方案：即采用DBUA的方式。

pre-step：
充分的停机时间
操作系统： windows server 2008 r2 standard
数据库版本： Oracle 11.2.0.1

step 1:  备份
expdp  system/oracle directory=dmp schemas=dbseeker dumpfile=dbseeker.dump LOGFILE=dbseeker.dump.log

step 2： 卸载Oracle

完美卸载oracle11g步骤：

1.  开始－＞设置－＞控制面板－＞管理工具－＞服务 停止所有Oracle服务。
2. 开始－＞程序－＞Oracle - OraHome－＞Oracle Installation Products－＞ Universal Installer，单击“卸载产品”-“全部展开”，选中除“OraDb11g_home1”外的全部目录，删除。这里要运行一个deinstall.bat脚本
3. 运行regedit，选择HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE，按del键删除。
4.  运行regedit，选择HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services，滚动这个列表，删除所有以oracle或OraWeb开头的内容。
5.  运行refedit，HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application，删除所有Oracle相关内容。
6.  删除HKEY_CLASSES_ROOT目录下所有以Ora、Oracle、Orcl或EnumOra为前缀的内容。
7.  删除HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\MenuOrder\Start Menu\Programs中所有以oracle开头的内容。
8.  我的电脑-->属性-->高级-->环境变量,删除环境变量CLASSPATH和PATH中有关Oracle的设定。
9.  从桌面上、STARTUP（启动）组、程序菜单中，删除所有有关Oracle的组和图标。
10.  删除所有与Oracle相关的目录(如果删不掉，重启计算机后再删就可以了)包括：
    一： C:\Program file\Oracle目录。
    二： ORACLE_BASE目录(oracle的安装目录)。
    三： C:\WINDOWS\system32\config\systemprofile\Oracle目录。
    四： C:\Users\Administrator\Oracle目录。

如果有个别DLL文件无法删除的情况，则不用理会，重新启动，开始新的安装，安装时，选择一个新的目录，安装完毕并重新启动后，老的目录及文件就可以删除掉了。


step 3:  直接安装Oracle 11.2.0.4 
注意： 不建议像大部分网上的例子一样，选择创建和配置数据库（如下图），老老实实的先安装数据库软件，再dbca建库，原因就是这样可以更好的定制我们的数据库。


step:4  打bundle patch，注：windows里叫bundle patch
1. 停监听停库停服务，服务一定要全部停掉
2. 更新opatch:  opatch版本需要11.2.0.3.5以上，默认是11.2.0.3.4

